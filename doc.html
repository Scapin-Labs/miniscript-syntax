<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>SCRIPTING</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SCRIPTING</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_basics">Basics</a>
<ul class="sectlevel2">
<li><a href="#_running_scripts">Running Scripts</a></li>
<li><a href="#_exposing_c_methods_to_miniscript">Exposing C# methods to miniscript</a></li>
<li><a href="#_type_conversion">Type conversion</a></li>
<li><a href="#_functions">Functions</a></li>
<li><a href="#_unity_integration">Unity Integration</a></li>
<li><a href="#_imports">Imports</a></li>
</ul>
</li>
<li><a href="#_coding_guidelines">Coding Guidelines</a></li>
<li><a href="#_monkey_patching">Monkey patching</a></li>
<li><a href="#_signals_and_networking">Signals and Networking</a>
<ul class="sectlevel2">
<li><a href="#_signals_binds">Signals &amp; Binds</a></li>
<li><a href="#_shared_state">Shared State</a></li>
<li><a href="#_networking">Networking</a></li>
</ul>
</li>
<li><a href="#_activities">Activities</a>
<ul class="sectlevel2">
<li><a href="#_the_activity_script">The Activity Script</a></li>
<li><a href="#_using_gpt">Using GPT</a></li>
<li><a href="#_multiuser_activities">Multiuser activities</a></li>
</ul>
</li>
<li><a href="#_exposed_functions">Exposed Functions</a>
<ul class="sectlevel2">
<li><a href="#_miscfunctions">MiscFunctions</a></li>
<li><a href="#_scriptmanager">ScriptManager</a></li>
<li><a href="#_scapinscriptmanager">ScapinScriptManager</a></li>
<li><a href="#_unityfunctions">UnityFunctions</a></li>
<li><a href="#_segmenttracker">SegmentTracker</a></li>
<li><a href="#_reporter">Reporter</a></li>
<li><a href="#_usermanager">UserManager</a></li>
<li><a href="#_networkscripting">NetworkScripting</a></li>
<li><a href="#_avatarmanager">AvatarManager</a></li>
<li><a href="#_togglechatorvoice">ToggleChatOrVoice</a></li>
<li><a href="#_contextmenuview">ContextMenuView</a></li>
<li><a href="#_activitymanager">ActivityManager</a></li>
<li><a href="#_notifier">Notifier</a></li>
<li><a href="#_openai">OpenAI</a></li>
<li><a href="#_elevenlabs">ElevenLabs</a></li>
<li><a href="#_scapinaudiomanager">ScapinAudioManager</a></li>
<li><a href="#_activitygenerator">ActivityGenerator</a></li>
<li><a href="#_livemessages">LiveMessages</a></li>
<li><a href="#_conversationpresenter">ConversationPresenter</a></li>
<li><a href="#_cameramanager">CameraManager</a></li>
<li><a href="#_discovertabsspawner">DiscoverTabsSpawner</a></li>
<li><a href="#_conversationsscreenpresenter">ConversationsScreenPresenter</a></li>
<li><a href="#_musicgame">MusicGame</a></li>
<li><a href="#_chathud">ChatHUD</a></li>
<li><a href="#_liveinchatpanel">LiveInChatPanel</a></li>
<li><a href="#_conversationview">ConversationView</a></li>
</ul>
</li>
<li><a href="#_exposed_objects">Exposed Objects</a>
<ul class="sectlevel2">
<li><a href="#_gptstream">GptStream</a></li>
<li><a href="#_signalresult">SignalResult</a></li>
<li><a href="#_scriptevent">ScriptEvent</a></li>
<li><a href="#_idocument">IDocument</a></li>
<li><a href="#_avatar">Avatar</a></li>
<li><a href="#_receiver">Receiver</a></li>
<li><a href="#_activitydata">ActivityData</a></li>
<li><a href="#_message">Message</a></li>
<li><a href="#_scapinroomproperties">ScapinRoomProperties</a></li>
<li><a href="#_discovercarddata">DiscoverCardData</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_basics">Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scripting allows us to change the behaviour of Scapin without building the app,
which means we can add features to already installed apps very quickly.</p>
</div>
<div class="paragraph">
<p>It also allows us to iterate and test features much faster.</p>
</div>
<div class="paragraph">
<p>We use <em>miniscript</em> as our scripting language.</p>
</div>
<div class="sect2">
<h3 id="_running_scripts">Running Scripts</h3>
<div class="paragraph">
<p>Once a script starts, it runs from top to bottom until its done. Script execution
is performed on the main thread, but doesn&#8217;t block it&#8201;&#8212;&#8201;we run only a limited number
of opcodes from the script each frame. So a script can run an infinite loop if it needs to.</p>
</div>
<div class="paragraph">
<p>The first script that runs is the <em>startup</em> script. This script is the same for everyone
and can be used to patch or tweak parts of the app.</p>
</div>
<div class="paragraph">
<p>The other use of script are inside a scape chat, normally as part of an <em>Activity</em>.</p>
</div>
<div class="paragraph">
<p>Scripts are loaded from firebase storage under <em>scripts/&lt;name&gt;.ms</em>.</p>
</div>
<div class="paragraph">
<p>Look at the miniscript quick reference for basic usage.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exposing_c_methods_to_miniscript">Exposing C# methods to miniscript</h3>
<div class="paragraph">
<p>Methods can be exposed to miniscript by adding the <code>[ScriptFunction]</code> attribute
to them, and then calling <code>Register()</code> or <code>RegisterType()</code> on the ScriptManager.</p>
</div>
<div class="paragraph">
<p>The ScriptManager will take care of converting arguments and return values to
and from miniscript.</p>
</div>
<div class="paragraph">
<p>Methods that return <code>Task</code> will be automatically awaited, since miniscript
supports "partial results" and can wait for a function to finish without
blocking inside the interpreter.</p>
</div>
<div class="listingblock">
<div class="title">C#</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="csharp">[Inject]
public void Construct(ScriptManager scriptManager)
{
    // Make sure all our ScriptFunctions are registered for use by miniscript
    scriptManager.Register(this);
}

[ScriptFunction(Name = "web_get", Doc = "Perform a http GET and return it as text.")]
public static async Task&lt;object&gt; WebGet(string url)
{
    var u = new Uri(url);
    var bytes = await EndPoint.FromScheme(u.Scheme).LoadFile(u).Await();
    return bytes != null ? Encoding.UTF8.GetString(bytes) : null;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">introText = web_get("https://somewhere.com/intro.txt")
gameObj.GetComponent(Text).text = introText</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to manually handle tasks, you can add the <code>Await = false</code> attribute
to your ScriptFunctions, and then use the <code>await()</code>, <code>await_then_signal()</code> and <code>await_then_call()</code> functions.</p>
</div>
<div class="listingblock">
<div class="title">C#</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="csharp">[ScriptFunction(Name = "web_get", Await = false]
public static async Task&lt;object&gt; WebGet(string url)
...</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">handleText = function(text)
    get_component(gameObj, Text).text = text
end function

task = web_get("https://somewhere.com/intro.txt")
await_then_call(task, @handleText)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or you can use the properties of the task directly;</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">task = web_get("https://somewhere.com/intro.txt")

while not task.IsCompleted
    wait 1
    update_busy_indicator()
end while

text = task.Result;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_conversion">Type conversion</h3>
<div class="paragraph">
<p>When arguments are passed into C# via registered functions, or when results are
returned back to miniscript, we often have to convert the types.</p>
</div>
<div class="paragraph">
<p>Fundamental types are passed by value, converting only as necessary. A <em>boolean</em>
in C# becomes a number that is either 0 or 1 in miniscript and vice versa.</p>
</div>
<div class="paragraph">
<p>Dictionaries and Lists in C# are also converted by value. This makes it practical
to deal with json and other serialized objects.</p>
</div>
<div class="paragraph">
<p>Other C# classes are passed <em>by reference</em>. On the miniscript side they look like
a Map (<em>ValMap</em>), but a reference to the real C# object is kept within the Map.</p>
</div>
<div class="paragraph">
<p>If you try to access fields, properties or methods on such a map, we use reflection
to look up those references, making the object behave like expected.</p>
</div>
<div class="listingblock">
<div class="title">C#</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="csharp">[ScriptFunction(Name = "get_my_location"]
public Transform GetLocation()
{
    return myGameObject.transform;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">    tx = get_my_location()
    for i in xrange(tx.childCount)
        tx.GetChild(i).gameObject.SetActive(false)
    end for</code></pre>
</div>
</div>
<div class="paragraph">
<p>Passing a Map from Miniscript to C# will try to convert the map to the target type if possible;</p>
</div>
<div class="listingblock">
<div class="title">C#</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="csharp">[ScriptFunction(Name = "post_message"]
public Task PostMessage(Message msg)
{
    messageManager.Send(msg.text, msg.from);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">    post_message({ text = "Hello", from = "Jocke"})</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Notice also the new map syntax)</p>
</div>
</div>
<div class="sect2">
<h3 id="_functions">Functions</h3>
<div class="sect3">
<h4 id="_calling_functions">Calling functions</h4>
<div class="paragraph">
<p>It&#8217;s straightforward to call into <em>C#</em> from miniscript, since it just involves looking up the correct entry point an executing the entire <em>C#</em> method before returning.</p>
</div>
<div class="paragraph">
<p>The other way around gets a bit more complicated, since miniscript runs the script from top to bottom (as mentioned), and only a limited number of opcodes is executed each frame.</p>
</div>
<div class="paragraph">
<p>What happens when you try to run a function defined in miniscript is that a whole new interpreter instance is created, the code is compiled, <em>but not executed</em>, and then the miniscript function call is pushed onto the call stack.</p>
</div>
</div>
<div class="sect3">
<h4 id="_callbacks_actions">Callbacks &amp; Actions</h4>
<div class="paragraph">
<p>Miniscript functions can convert to and from <code>Action</code> (and <code>UnityAction</code>).</p>
</div>
<div class="paragraph">
<p>Miniscript does not have closures, which can be a problem if you need to pass
state into your miniscript function.</p>
</div>
<div class="paragraph">
<p>This can be solved with the <code>partial_fn(function, args&#8230;&#8203;)</code> function, that can convert one function to another, while binding values to arguments.</p>
</div>
<div class="paragraph">
<p>Here is an example how to add an argument holding the gameState to
a function that normally takes no argument (A <em>UnityAction</em> for a button click);</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">setupButton = function(gameObject, gameState)
    button = gameObject.GetComponent(Button)
    // Converts a function that takes 1 argument to one that takes 0
    // arguments
    button.onClick.AddListener(apply(@handleButtonClick, gameState))
end function

handleButtonClick = function(gameState)
    gameState.buttonClicked = true
end function</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unity_integration">Unity Integration</h3>
<div class="paragraph">
<p>If you pass a unity gameobject to miniscript, you can access it as normal as seen
in the following example.</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">    TextListItem = get_type("Scapin.UI.Text.TextListItem")
    gameGui = GameObject.Find("GameGUI")
    listItem = gameGui.GetComponent(TextListItem)
    listItem.bubble.text.text = "Hey"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any method that takes an <code>Action</code> or <code>UnityAction</code> can accept a miniscript function.</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">clickedButton = function()
    print "CLICKED BUTTON"
end function

viewCreated = function(name, view)
    if name == "HomeView" then
        view.settingsButton.onClick.AddListener(@clickedSettings)
    end if
end function
bind("viewCreated")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_imports">Imports</h3>
<div class="paragraph">
<p>You can use <code>import "script"</code> to import another script by name. The script
will be parsed and all its exposed functions will become available under
the script name;</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">import "utils"

opts = utils.makeGptOptions(prompt, text)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">gpt = import("gpt_utilities")
opts = gpt.makeGptOptions(prompt, text)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Script you want to import must be uploaded to firebase.</p>
</div>
<div class="sect3">
<h4 id="_static_import">Static import</h4>
<div class="paragraph">
<p>Static imports will put its exposed functions (and variables) directly
in the scope of the calling script. It can be usesful for adding global
functions, especially ones that may or may not be exposed by C#.</p>
</div>
<div class="listingblock">
<div class="title">compat.ms</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">if not is_registered("app_version") then
   app_version = function()
       return "10.5"
   end function
end if</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">static_import "compat"

if app_version() &gt;= "10.6" then
end if</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coding_guidelines">Coding Guidelines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Miniscript is pretty limited, and it&#8217;s easy to get things wrong.</p>
</div>
<div class="paragraph">
<p>Scripts are run from top to bottom in one go. That means you can not call
a function that has not been defined yet.</p>
</div>
<div class="paragraph">
<p>It&#8217;s best to put all code inside functions to avoid this problem.</p>
</div>
<div class="paragraph">
<p>Global variables are also tricky since they can easily be read, but if you try
to assign one you will create a local variable instead. So its best to avoid
global variables and pass state directly to functions.</p>
</div>
<div class="paragraph">
<p>This is one way of solving it;</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">Game = {
    score = 100,
    health = 50,
    state = "running"
}

Game.update = function(self)
    self.score += 1
end function

Game.run = function(Self)
    while self.state == "running"
        self.update()
    end while
end function

// ----

Game.run()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to use <code>bind()</code> to catch signals, and still be able to access the game state, you
can use <code>partial_fn()</code> (that was introduced earlier);</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">main = function()
    ...
    bind("textIncoming", partial_fn(@textIncoming, gameState))
end function

textIncoming = function(text, gameState)
    gameState.lastText = text
end function</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_monkey_patching">Monkey patching</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scripts can be used to modify the behaviour of the application wihtout needing to
redeploy. Tools for this include;</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resolve(typeName)</code> which allows you to get a reference to any object bound by Zenject.</p>
</li>
<li>
<p><code>get_type(typeName)</code> gives you direct access to a type.</p>
</li>
<li>
<p>Private members are accessible to miniscript</p>
</li>
<li>
<p>Miniscript functions can bind to <code>Action</code> or <code>UnityAction</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For instance;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">    // Manually close the multichoice view
    conversationProvider = resolve("Scapin.UI.Conversations.ConversationProvider")
    conversationProvider._view.multipleChoiceView.gameObject.SetActive(false);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_signals_and_networking">Signals and Networking</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_signals_binds">Signals &amp; Binds</h3>
<div class="paragraph">
<p>Scripts can define functions, and then bind those functions to named <em>signals</em>.
Whenever that signal is triggered the function will be called.</p>
</div>
<div class="paragraph">
<p>Use the <code>bind()</code> function to connect a function to a signal.</p>
</div>
<div class="paragraph">
<p>Use <code>signal()</code> to send a signal that triggers bound functions.</p>
</div>
<div class="paragraph">
<p>Signal functions run in their own interpreter, and can progress in parallel to the main
script.</p>
</div>
<div class="paragraph">
<p>You can also use <code>signal_all()</code>, <code>signal_many()</code> or <code>signal_one()</code> to send
signals across the network to other users.</p>
</div>
<div class="paragraph">
<p>Some signals are sent by the Scapin app when certain things happens, and you can
listen to those signals by binding the corresponding signal name.</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">handleText = function(text)
    if text.indexOf("fuck") &gt;= 0 then
        say("No swearing!")
        return
    end if
    text = text.replace(":s:", "💋")
    send_message(text)
end function
bind("textIncoming", @handleText)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_shared_state">Shared State</h3>
<div class="paragraph">
<p>To share state between clients, use the global <code>Shared</code> object. It contains
references to the shared user objects of all online users.</p>
</div>
<div class="paragraph">
<p><code>Shared.room</code> &#8592; The room properties</p>
</div>
<div class="paragraph">
<p><code>Shared.my_user</code> &#8592; Your user object</p>
</div>
<div class="paragraph">
<p><code>Shared.users</code> &#8592; List of all online users</p>
</div>
<div class="paragraph">
<p><code>Shared.user</code> &#8592; Maps user IDs to users</p>
</div>
<div class="paragraph">
<p><code>Shared.time</code> &#8592; Readonly network synced time (in seconds)</p>
</div>
<div class="paragraph">
<p>User objects contain whatever Photon properties has been set on that user, and
also the two read only fields <em>id</em> and <em>nick</em>.</p>
</div>
<div class="paragraph">
<p>Note that shared properties are represented by a single hashmap. This means you
can set a value like <code>Shared.room.time_left = 10</code> or <code>Shared.users[0].name =
"Tourist"</code>, but for instance <code>Shared.room.scores[3] = 2</code> will either fail (if
there is not already a <code>scores</code> field that is an array) or succeed, but only
change a local copy of the scores array.</p>
</div>
</div>
<div class="sect2">
<h3 id="_networking">Networking</h3>
<div class="paragraph">
<p>Coordinating things between online players;</p>
</div>
<div class="paragraph">
<p>Notice how we can use blocking logic because of how miniscript works.</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">// This will be called for everyone online
startGame = function()
    option = ask_question("Game Time",
        "Would you like to join the game?", ["Yes", "No"], 5)
    if option == 0 then
        // Properties on users are shared over the network,
        // so the game coordinator can now see which players
        // have accepted to be in the game.
        Shared.my_user.inGame = true
    end if

end function
bind("startGame")

// This function needs to be triggered by the UI some how, and will only
// be called for the player initiating the game.
startGameClicked = function()
    // Make sure only one game is running at a time. `room` properties
    // are shared with everyone in the room.
    if Shared.room.runningGame then
        return
    end if
    Shared.room.runningGame = true
    // Will trigger the startGame function on all clients,  including
    // this one.
    signal_all("startGame")
    // Wait until players had a chance to join.
    wait 5
    // Begin game loop
    while true
        for user in Shared.users
            if user.inGame then
                /// ... Do stuff
            end if
        end for
    end while
    Shared.room.runningGame = false
end function</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_networking_with_signal_and_wait_and_signal_return">Networking with <em>signal_and_wait()</em> and <em>signal_return()</em></h4>
<div class="paragraph">
<p><code>signal_all_and_wait(signal, timeout, args &#8230;&#8203;)</code> will send a signal to all users, but block
until all users have returned a result, or the timeout is reached.</p>
</div>
<div class="paragraph">
<p><code>signal_and_wait()</code> is used to send a signal to a list of users.</p>
</div>
<div class="paragraph">
<p>The recipient of the signal should return a result using <code>signal_return()</code>. If this function is not called, the
timeout will come into play and the <code>signal_and_wait()</code> function
will return on the sender, and the resulting list will not contain users that did not answer.</p>
</div>
<div class="paragraph">
<p>The recipient can also call <code>signal_cancel()</code>, in which
case no result will be added to the senders list.</p>
</div>
<div class="paragraph">
<p>The return value of <em>signal_and_wait</em> is an array of <em>SignalResult</em>.</p>
</div>
<div class="paragraph">
<p>Each SignalResult contains <em>userId</em> of the respondent, and a <em>result</em> array with the results
returned by the peer using the <em>signal_return(args &#8230;&#8203;)</em> function..</p>
</div>
<div class="listingblock">
<div class="title">miniscript</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">startGame = function()
    join = ask("Join game ?")
    if join then
        signal_return(0)
    else
        signal_cancel()
    end if
end function
bind("start", @starGame)

askQuestion = function()
 // ...
 signal_return(0)
end function
bind("ask", @askQuestion)

hostGame = function()
  results = signal_all_and_wait("start", 5, "Game Name")
  // Build playes from results so we only include players
  // that wanted to join
  players = to_users(results)
  for player in players
    player.score = 0
  end for

  for no in xrange(10)
    results = signal_and_wait(players, "question", 10, question[no].text)

    // Again, get rid of players that disconnected or cancelled
    players = to_users(results)

    for res in results
        if res.results[0] == question[no].correct then
            Shared.user[res.userId].score += 1
        end if
    end for
  end for

end function

// This signal is only sent on the client that starts the activity
bind("activityStarted", @hostGame)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_activities">Activities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An activity is attached to a group when a user manually starts one via the <em>"Arcade"</em> button. The activity is then running until it is manually stopped from a script or
from the UI.</p>
</div>
<div class="paragraph">
<p>An activity normally consists of a <em>Bot</em> or <em>Host</em> avatar, and a script that controls
the host and handles user interactions with the activity.</p>
</div>
<div class="sect2">
<h3 id="_the_activity_script">The Activity Script</h3>
<div class="paragraph">
<p>Normally, a script is associated with the activity. It will start to execute as soon
as any user enters a group where the activity is active, or when an activity is
started while the user is in the group.</p>
</div>
<div class="paragraph">
<p>All users run the same script, so it is up to the developer to handle synchronization
between users. State can be shared through Photon (via the <code>Shared</code> object, or via
signals) or using Firebase (persistent).</p>
</div>
<div class="paragraph">
<p>This is an example script that listens only for the text incoming event
and speaks the text using <code>say_message()</code> (text to audio).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">while true
    event = wait_event()
    if event.is_text_incoming then
        say_message({Text = event.text})
    end if
end while</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_gpt">Using GPT</h3>
<div class="paragraph">
<p>To make the host come alive, we call OpenAI/gpt to drive its dialogue.</p>
</div>
<div class="paragraph">
<p>A script will have to collect user inputs (and decide what part of the message history to include in AI generation), post this to OpenAI and get the result.</p>
</div>
<div class="paragraph">
<p>The result can then both be spoken by the host avatar (using text to speech) and posted to
the group chat.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">gptDefaults = {
    model = "gpt-3.5-turbo",
    temperature = 1.4,
    max_tokens = 50,
}
prompts = [{"role": "system", "content": "You are an helpful assistant."},
            {"role": "assistant", "content": "Answer the users questions."}]

stream = stream_gpt_response(gptDefaults.merge({ messages = prompts }))
while stream.next()
    if stream.got_partial_string then
        say_message_bg({ Text = event.stream.partial_string, FromId = "familiar"})
    end if
end while
post_message_bg({ Text = stream.all_text, FromId = "familiar"})</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>stream_gpt_response()</code> is the main worker; it returns a stream that can be iterated
over until all results are received. Then we decide when we should speak the text (using <code>say_message[_bg](msg)</code>) and when to post a message (using <code>post_message[_bg](msg)</code>)</p>
</div>
<div class="paragraph">
<p>We can combine events and streams by handing the stream to the event system using <code>stream_to_events()</code>;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">stream_to_events(stream)
while true
    event = wait_event()
    if event.is_stream then
        if event.stream.got_partial_string then
            say_message_bg({ Text = event.stream.partial_string, FromId = "familiar"})
        end if
        if event.stream.is_done then
            post_message_bg({ Text = event.stream.all_text, FromId = "familiar"})
        end if
    else if event.is_text_incoming or event.is_message_transcribed then
        stream.abort()
    end if
end while</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you shouldn&#8217;t access the <code>stream</code> after you have passed it to the event system,
as it will be consumed asynchronously and generate events for you.</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiuser_activities">Multiuser activities</h3>
<div class="paragraph">
<p><code>activityStarted</code> is only sent to one client (the user you clicked the button)
so normally dedicate that client to "host" the activity.</p>
</div>
<div class="paragraph">
<p>In a simple activity, if the host leaves the activity is virtually over.</p>
</div>
<div class="paragraph">
<p>To handle this, all clients could listen to <code>playerLeft</code> and end the activity
if the player was the host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="miniscript">if event.signal == "activityStarted" then
    Shared.room.host = Shared.my_user.id
    startHosting()
else if event.signal == "netWorkEvent" then
    args = event.signal_args
    if args[0] == "PlayerLeft" and args[1].UserId == Shared.room.host then
        stop_activity()
    end if
end if</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposed_functions">Exposed Functions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_miscfunctions">MiscFunctions</h3>
<div class="sect4">
<h5 id="_object_addobject_a_object_b"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>add</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> a, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> b)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_object_mulobject_a_object_b"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>mul</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> a, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> b)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_object_subobject_a_object_b"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>sub</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> a, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> b)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_object_divobject_a_object_b"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>div</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> a, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> b)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_string_guid"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>guid</code>()</h5>
<div class="paragraph">
<p>Return a new Global Unique Identifier in string form.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_string_get_hashstring_text"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>get_hash</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<div class="paragraph">
<p>Get the sha256 hash of a string</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_string_to_jsonobject_obj"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>to_json</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> obj)</h5>
<div class="paragraph">
<p>Convert an object to json text</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_object_from_jsonstring_json"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>from_json</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> json)</h5>
<div class="paragraph">
<p>Convert a json document in string form to miniscript.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_int64_unixtime"><a href="#_int64">Int64</a> <code>unixtime</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_type_get_typestring_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.type">Type</a> <code>get_type</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<div class="paragraph">
<p>Try to get a <code>Type</code> object of the given name. You will need to pass in the fully qualified assembly name.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_regex_regexstring_pattern"><a href="#_regex">Regex</a> <code>regex</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> pattern)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_liststring_split_and_keepstring_text_string_pattern">List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>split_and_keep</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> pattern)</h5>
<div class="paragraph">
<p>Split the text into a list of strings using the pattern. The pattern ending the strings will be kept.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_string_regex_replacestring_text_string_pattern_string_replacement"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>regex_replace</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> pattern, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> replacement)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_string_regex_replace_allstring_text_dictionarystringstring_replacements"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>regex_replace_all</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; replacements)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_string_html_decodestring_text"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>html_decode</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_logobject_text"><code>log</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> text)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_scriptmanager">ScriptManager</h3>
<div class="sect4">
<h5 id="_bindstring_signal_valfunction_vf_null"><code>bind</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="#_valfunction">ValFunction</a> vf = null)</h5>
<div class="paragraph">
<p>Bind a signal to a function. When the signal is emitted the function will be called. Multiple signals will be queued and run one after the other.
Note that every bind will create a new interpreter that share global variables with other interpreters. Triggering the signal will push the function on top of the interpreter stack and run it.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_await_then_signaltask_t_string_signal"><code>await_then_signal</code>(<a href="#_task">Task</a> t, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_await_then_calltask_t_valfunction_fn"><code>await_then_call</code>(<a href="#_task">Task</a> t, <a href="#_valfunction">ValFunction</a> fn)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_string_script_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>script_name</code>()</h5>
<div class="paragraph">
<p>Return the name of the current script.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_signalstring_signal_object_arg0_null_object_arg1_null_object_arg2_null"><a href="#_bool">bool</a> <code>signal</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg2 = null)</h5>
<div class="paragraph">
<p>Send a signal locally only, calling any functions bound to the signal. Returns true if any function was started.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskobject_signal_and_waitstring_signal_object_arg0_null_object_arg1_null_object_arg2_null">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; <code>signal_and_wait</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg2 = null)</h5>
<div class="paragraph">
<p>Send a signal locally only, calling any functions bound to the signal. Returns null if no script had bound the task, otherwise a task that can be used to wait for a result from the first bound function that returns.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_autoloadstring_name"><a href="#_task">Task</a> <code>autoload</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<div class="paragraph">
<p>Runs the given script and triggers a reload every time the script changes.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskvalue_importstring_name">Task&lt;<a href="#_value">Value</a>&gt; <code>import</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<div class="paragraph">
<p>Import code. Returns a new module containing all globals defined in the imported source file.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_static_importstring_name"><a href="#_task">Task</a> <code>static_import</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<div class="paragraph">
<p>Import code. Returns a new module containing all globals defined in the imported source file.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_is_registeredstring_classname"><a href="#_bool">bool</a> <code>is_registered</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> className)</h5>
<div class="paragraph">
<p>Returns true if the given classname or function was registered.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_have_functionstring_functionname"><a href="#_bool">bool</a> <code>have_function</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> functionName)</h5>
<div class="paragraph">
<p>Return true if the given function exists and can be called.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_awaittask_t"><a href="#_task">Task</a> <code>await</code>(<a href="#_task">Task</a> t)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_run_asyncvalfunction_fn_object_arg0_null_object_arg1_null_object_arg2_null"><code>run_async</code>(<a href="#_valfunction">ValFunction</a> fn, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg2 = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_valmap_to_mapvalmap_vm"><a href="#_valmap">ValMap</a> <code>to_map</code>(<a href="#_valmap">ValMap</a> vm)</h5>
<div class="paragraph">
<p>Convert the object to a Miniscript map. Converts all public properties and fields to keys &amp; values and puts them into the map.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_clear_events"><code>clear_events</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskscriptevent_wait_event">Task&lt;<a href="#_scriptevent">ScriptEvent</a>&gt; <code>wait_event</code>()</h5>
<div class="paragraph">
<p>Wait for a new event to arrive.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_scapinscriptmanager">ScapinScriptManager</h3>
<div class="sect4">
<h5 id="_object_resolvestring_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>resolve</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<div class="paragraph">
<p>Resolve a qualified type using Zenject.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_object_get_varstring_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> <code>get_var</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_varstring_name_object_val"><code>set_var</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> val)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_unityfunctions">UnityFunctions</h3>
<div class="sect4">
<h5 id="_listcomponent_get_all_componentsgameobject_go_type_type">List&lt;<a href="https://docs.unity3d.com/ScriptReference/Component.html">Component</a>&gt; <code>get_all_components</code>(<a href="https://docs.unity3d.com/ScriptReference/GameObject.html">GameObject</a> go, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.type">Type</a> type)</h5>
<div class="paragraph">
<p>Call <code>GetComponentsInChildren()</code> to get all child components of a given type.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_version_app_version"><a href="#_version">Version</a> <code>app_version</code>()</h5>
<div class="paragraph">
<p>Get Application.version as a Version object</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_play_soundaudioclip_clip_float_volume_1"><code>play_sound</code>(<a href="https://docs.unity3d.com/ScriptReference/AudioClip.html">AudioClip</a> clip, <a href="#_float">float</a> volume = 1)</h5>
<div class="paragraph">
<p>Play a sound from an AudioClip. Will create an AudioSource the first time its called.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_segmenttracker">SegmentTracker</h3>
<div class="sect4">
<h5 id="_trackstring_eventname_string_param_null_string_value_null_string_param2_null_string_value2_null"><code>track</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> eventName, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> param = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> value = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> param2 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> value2 = null)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_reporter">Reporter</h3>
<div class="sect4">
<h5 id="_post_track_eventappevent_evt_dictionarystringobject_trackingparams"><code>post_track_event</code>(<a href="#_appevent">AppEvent</a> evt, Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; trackingParams)</h5>
<div class="paragraph">
<p>Send a tracking event to Segment.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_usermanager">UserManager</h3>
<div class="sect4">
<h5 id="_taskdictionarystringobject_read_firedocidocument_docref">Task&lt;Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt;&gt; <code>read_firedoc</code>(<a href="#_idocument">IDocument</a> docRef)</h5>
<div class="paragraph">
<p>Read the entire document referenced by <code>docRef</code>. You can also use `subscribe_firedoc() to get initial state and subsequent updates.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_write_firedocidocument_docref_dictionarystringobject_values"><a href="#_task">Task</a> <code>write_firedoc</code>(<a href="#_idocument">IDocument</a> docRef, Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; values)</h5>
<div class="paragraph">
<p>Write the object <code>values</code> to the document referenced by <code>docRef</code>.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_idocument_get_firedocstring_path"><a href="#_idocument">IDocument</a> <code>get_firedoc</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> path)</h5>
<div class="paragraph">
<p>Get a reference to a firebase document.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_idocument_get_user_firedocstring_name_null"><a href="#_idocument">IDocument</a> <code>get_user_firedoc</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name = null)</h5>
<div class="paragraph">
<p>Get a reference to a firebase document for the current user. If <code>name</code> is not given, the default name associated with this script is used.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_idocument_get_scape_firedocstring_name_null"><a href="#_idocument">IDocument</a> <code>get_scape_firedoc</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name = null)</h5>
<div class="paragraph">
<p>Get a reference to a firebase document for the current scape. If <code>name</code> is not given, the default name associated with this script is used.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskliststring_list_scape_firedocs">Task&lt;List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt;&gt; <code>list_scape_firedocs</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_ilistener_subscribe_firedocidocument_docref_string_eventname_null"><a href="#_ilistener">IListener</a> <code>subscribe_firedoc</code>(<a href="#_idocument">IDocument</a> docRef, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> eventName = null)</h5>
<div class="paragraph">
<p>Subscribe to a firebase document. Call the given event when the document changes.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_networkscripting">NetworkScripting</h3>
<div class="sect4">
<h5 id="_signal_allstring_signal_object_arg0_null_object_arg1_null"><code>signal_all</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Send a signal to all connected players.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_tasksignalresult_signal_all_and_waitstring_signal_int_timeout_object_arg0_null_object_arg1_null">Task&lt;<a href="#_signalresult">SignalResult</a>[]&gt; <code>signal_all_and_wait</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="#_int">int</a> timeout, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Send a signal to all connected players.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_tasksignalresult_signal_many_and_waitlistobject_ids_string_signal_int_timeout_object_arg0_null_object_arg1_null">Task&lt;<a href="#_signalresult">SignalResult</a>[]&gt; <code>signal_many_and_wait</code>(List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; ids, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="#_int">int</a> timeout, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Send a signal to some connected players and wait for timeout or answer.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_signal_cancel"><code>signal_cancel</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_signal_returnobject_arg0_null_object_arg1_null"><code>signal_return</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Call from a signal handler to return data to the caller. Normally used in conjunction with <code>signal_and_wait()</code>.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_signal_oneobject_id_string_signal_object_arg0_null_object_arg1_null"><code>signal_one</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> id, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Send a signal to a single player, given the players user id.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_signal_manylistobject_ids2_string_signal_object_arg0_null_object_arg1_null"><code>signal_many</code>(List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; ids2, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg0 = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> arg1 = null)</h5>
<div class="paragraph">
<p>Send a signal to several players.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_listvalue_to_userslistobject_objects">List&lt;<a href="#_value">Value</a>&gt; <code>to_users</code>(List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; objects)</h5>
<div class="paragraph">
<p>Convert an array of "user like" objects into actual User objects. Objects can be User objects, strings (userIds) and also SignalResults.</p>
</div>
<div class="paragraph">
<p>For signal results, any integer results less than zero or null result will cause that user to be filtered out. This can be used to update a list of players depending on how they answer a question for instance.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_avatarmanager">AvatarManager</h3>
<div class="sect4">
<h5 id="_set_avatar_name_tagavatar_avatar_string_decorator_null"><code>set_avatar_name_tag</code>(<a href="#_avatar">Avatar</a> avatar, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> decorator = null)</h5>
<div class="paragraph">
<p>Set the text displayed above the avatar (normally the users nick name).</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_set_speaking_limitfloat_speakingvolume_float_threshold"><code>set_speaking_limit</code>(<a href="#_float">float</a> speakingVolume, <a href="#_float">float</a> threshold)</h5>
<div class="paragraph">
<p>Set limits for detecting speech from microphone volume. When volume is above <code>speakingVolume</code> for <code>threshold</code> frames, we assume speech.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_avatar_get_avatarstring_id_null"><a href="#_avatar">Avatar</a> <code>get_avatar</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id = null)</h5>
<div class="paragraph">
<p>Returns the avatar used by the current player, or by the player with the given id.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_play_emoteavatar_avatar_string_emote"><code>play_emote</code>(<a href="#_avatar">Avatar</a> avatar, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> emote)</h5>
<div class="paragraph">
<p>Play named emote on the given avatar. Will do nothing if Avatar is null.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_togglechatorvoice">ToggleChatOrVoice</h3>
<div class="sect4">
<h5 id="_set_text_mode"><code>set_text_mode</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_voice_mode"><code>set_voice_mode</code>()</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_contextmenuview">ContextMenuView</h3>
<div class="sect4">
<h5 id="_add_script_buttonstring_text_action_action_string_menu_null"><code>add_script_button</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.action">Action</a> action, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> menu = null)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_activitymanager">ActivityManager</h3>
<div class="sect4">
<h5 id="_nullabledatetime_get_activity_reset_timestring_activityid">Nullable&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.datetime">DateTime</a>&gt; <code>get_activity_reset_time</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> activityId)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_is_starredstring_activityid"><a href="#_bool">bool</a> <code>is_starred</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> activityId)</h5>
<div class="paragraph">
<p>Is the given activity starred by you?</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_notifier">Notifier</h3>
<div class="sect4">
<h5 id="_popupstring_text"><code>popup</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<div class="paragraph">
<p>Show simple popup</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_show_overlay_textbool_visible_string_text_bool_showloader_false"><code>show_overlay_text</code>(<a href="#_bool">bool</a> visible, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text = "", <a href="#_bool">bool</a> showLoader = False)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskbool_announcement_popupstring_headline_string_body_null_string_imageurl_null_string_primarybuttontext_null_string_secondarybuttontext_null">Task&lt;<a href="#_bool">bool</a>&gt; <code>announcement_popup</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> headline, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> body = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> imageUrl = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> primaryButtonText = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> secondaryButtonText = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_ask_textstring_text_string_oktext_ok_string_suggestion_null_string_canceltext_cancel_string_prepopulatedtext_null_liststring_suggestions_null_string_title_null">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>ask_text</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> okText = "OK", <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> suggestion = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cancelText = "Cancel", <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> prepopulatedText = null, List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; suggestions = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> title = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_ask_text_with_suggestionsstring_text_string_oktext_ok_string_suggestion_null_string_canceltext_cancel_string_prepopulatedtext_null_liststring_suggestions_null_string_title_null_string_okbuttonhtmlcolor_bc79a8ff">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>ask_text_with_suggestions</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> okText = "OK", <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> suggestion = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cancelText = "Cancel", <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> prepopulatedText = null, List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; suggestions = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> title = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> okButtonHtmlColor = "#BC79A8FF")</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskbool_show_dialogstring_text_string_headline_string_okbutton_ok_string_imageurl">Task&lt;<a href="#_bool">bool</a>&gt; <code>show_dialog</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> headline, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> okButton = "OK", <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> imageUrl = "")</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_show_messagestring_text_float_duration_1_bool_minor_false_receiver_receiver_null_action_onclick_null_string_thumbnailurl_null"><code>show_message</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="#_float">float</a> duration = 1, <a href="#_bool">bool</a> minor = False, <a href="#_receiver">Receiver</a> receiver = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.action">Action</a> onClick = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> thumbnailUrl = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_toaststring_text_float_duration_1"><code>toast</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="#_float">float</a> duration = 1)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskint_ask_questionstring_heading_string_text_liststring_options_double_timeout_0">Task&lt;<a href="#_int">int</a>&gt; <code>ask_question</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> heading, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; options, <a href="#_double">double</a> timeout = 0)</h5>
<div class="paragraph">
<p>Show a dialog asking user a question, displaying one button per option given. returns the index of the option selected, or -1 if cancelled.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_openai">OpenAI</h3>
<div class="sect4">
<h5 id="_stream_openai_create_chat_completion_streamdictionarystringobject_data"><a href="#_stream">Stream</a> <code>openai_create_chat_completion_stream</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskdictionarystringobject_openai_create_chat_completiondictionarystringobject_data">Task&lt;Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt;&gt; <code>openai_create_chat_completion</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskdictionarystringobject_openai_v1_callstring_path_dictionarystringobject_data">Task&lt;Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt;&gt; <code>openai_v1_call</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> path, Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_get_from_gptdictionarystringobject_data_string_cachekey_null_bool_demandnewversion_true">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>get_from_gpt</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cacheKey = null, <a href="#_bool">bool</a> demandNewVersion = True)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskbool_stream_gpt_as_eventsdictionarystringobject_data_string_cachekey_null_bool_demandnewversion_true">Task&lt;<a href="#_bool">bool</a>&gt; <code>stream_gpt_as_events</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cacheKey = null, <a href="#_bool">bool</a> demandNewVersion = True)</h5>
<div class="paragraph">
<p>Create a stream for reading GPT data iteratively. Stream events are returned using script events.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_stream_to_eventsgptstream_stream"><code>stream_to_events</code>(<a href="#_gptstream">GptStream</a> stream)</h5>
<div class="paragraph">
<p>Move the stream to the event system. After this any stream events will be returned by wait_event(), and the only safe method you can call on the stream is abort().</p>
</div>
<div class="paragraph">
<p>If a previous stream was moved, it will be aborted at this point.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskgptstream_stream_gpt_responsedictionarystringobject_data_string_cachekey_null_bool_demandnewversion_false">Task&lt;<a href="#_gptstream">GptStream</a>&gt; <code>stream_gpt_response</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cacheKey = null, <a href="#_bool">bool</a> demandNewVersion = False)</h5>
<div class="paragraph">
<p>Create a stream for reading GPT data iteratively.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_generate_imagestring_prompt_string_size_1024x1024">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>generate_image</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> prompt, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> size = "1024x1024")</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_whisper_promptstring_prompt"><code>set_whisper_prompt</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> prompt)</h5>
<div class="paragraph">
<p>Set a prompt for voice to text.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_elevenlabs">ElevenLabs</h3>
<div class="sect4">
<h5 id="_taskaudioclip_text_to_speechstring_voiceid_string_text">Task&lt;<a href="https://docs.unity3d.com/ScriptReference/AudioClip.html">AudioClip</a>&gt; <code>text_to_speech</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> voiceId, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_scapinaudiomanager">ScapinAudioManager</h3>
<div class="sect4">
<h5 id="_play_audio_from_urlstring_audiourl_float_volume_0_2"><code>play_audio_from_url</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> audioUrl, <a href="#_float">float</a> volume = 0.2)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_play_sfxstring_sfxname_float_volume_0_2"><code>play_sfx</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> sfxName, <a href="#_float">float</a> volume = 0.2)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_play_background_musicstring_musicname_float_volume_0_2_bool_loop_true"><code>play_background_music</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> musicName, <a href="#_float">float</a> volume = 0.2, <a href="#_bool">bool</a> loop = True)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_stop_sfx"><code>stop_sfx</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_get_audio_clip"><code>get_audio_clip</code>()</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_activitygenerator">ActivityGenerator</h3>
<div class="sect4">
<h5 id="_taskactivitydata_generate_activitystring_description_string_templateid_string_activityid_null">Task&lt;<a href="#_activitydata">ActivityData</a>&gt; <code>generate_activity</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> description, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> templateId, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> activityId = null)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_livemessages">LiveMessages</h3>
<div class="sect4">
<h5 id="_mediaplayqueueinfo_generate_speechmessage_msg"><a href="#_mediaplayqueueinfo">MediaPlayQueueInfo</a> <code>generate_speech</code>(<a href="#_message">Message</a> msg)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_string_say_mediamediaplayqueueinfo_info"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>say_media</code>(<a href="#_mediaplayqueueinfo">MediaPlayQueueInfo</a> info)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_say_messagemessage_msg">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>say_message</code>(<a href="#_message">Message</a> msg)</h5>
<div class="paragraph">
<p>Find an avatar in the LiveInChatPanel to speak or play back the message</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_string_say_message_bgmessage_msg"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> <code>say_message_bg</code>(<a href="#_message">Message</a> msg)</h5>
<div class="paragraph">
<p>Find an avatar in the LiveInChatPanel to speak or play back the message</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_is_message_playedstring_id"><a href="#_bool">bool</a> <code>is_message_played</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskbool_wait_message_playedstring_id_int_timeout_10000">Task&lt;<a href="#_bool">bool</a>&gt; <code>wait_message_played</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id, <a href="#_int">int</a> timeout = 10000)</h5>
<div class="paragraph">
<p>Wait until a message in the play queue is actually played, or until the timeout is reached. Returns the message if playing was completed, or null if playing was aborted.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_abort_speakingavatar_avatar_null"><code>abort_speaking</code>(<a href="#_avatar">Avatar</a> avatar = null)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_conversationpresenter">ConversationPresenter</h3>
<div class="sect4">
<h5 id="_activityhostdata_get_host_data"><a href="#_activityhostdata">ActivityHostData</a> <code>get_host_data</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_scapinroomproperties_get_room_properties"><a href="#_scapinroomproperties">ScapinRoomProperties</a> <code>get_room_properties</code>()</h5>
<div class="paragraph">
<p>Get the current room properties.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_update_messagestring_id_string_textmessage"><code>update_message</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> textMessage)</h5>
<div class="paragraph">
<p>Update text part of a text message.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskactivitydata_get_next_activity_idstring_lastactivity">Task&lt;<a href="#_activitydata">ActivityData</a>&gt; <code>get_next_activity_id</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> lastActivity)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_colorobject_obj_color_color_null_float_time_0_1"><code>set_color</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> obj, <a href="https://docs.unity3d.com/ScriptReference/Color.html">Color</a> color = null, <a href="#_float">float</a> time = 0.1)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_color_get_colorobject_obj"><a href="https://docs.unity3d.com/ScriptReference/Color.html">Color</a> <code>get_color</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> obj)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_blinkobject_obj_color_color_null_float_time_0_1_int_count_6"><code>blink</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> obj, <a href="https://docs.unity3d.com/ScriptReference/Color.html">Color</a> color = null, <a href="#_float">float</a> time = 0.1, <a href="#_int">int</a> count = 6)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_task_connect_roomscapinroomproperties_props_null"><a href="#_task">Task</a> <code>connect_room</code>(<a href="#_scapinroomproperties">ScapinRoomProperties</a> props = null)</h5>
<div class="paragraph">
<p>Connect to photon.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_bool_is_online"><a href="#_bool">bool</a> <code>is_online</code>()</h5>
<div class="paragraph">
<p>True if this conversation auto connects to photon.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_stop_activity"><code>stop_activity</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_show_game_over_ui"><code>show_game_over_ui</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_do_send_text_inputbool_on"><code>do_send_text_input</code>(<a href="#_bool">bool</a> on)</h5>
<div class="paragraph">
<p>Send input text as message or not. Used when overriding text field behaviour.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_post_messagemessage_msg">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>post_message</code>(<a href="#_message">Message</a> msg)</h5>
<div class="paragraph">
<p>Post a message to the timeline</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_post_message_bgmessage_msg"><code>post_message_bg</code>(<a href="#_message">Message</a> msg)</h5>
<div class="paragraph">
<p>Post a message to the timeline</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_saystring_text"><code>say</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<div class="paragraph">
<p>Display a local message in the current chat.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_usergroup_get_groupstring_id_null"><a href="#_usergroup">UserGroup</a> <code>get_group</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id = null)</h5>
<div class="paragraph">
<p>Get the group for the current conversation.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_activitydata_get_activitystring_id_null"><a href="#_activitydata">ActivityData</a> <code>get_activity</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id = null)</h5>
<div class="paragraph">
<p>Get the activity for the current conversation.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_listmessage_get_messages">List&lt;<a href="#_message">Message</a>&gt; <code>get_messages</code>()</h5>
<div class="paragraph">
<p>Return all the messages in the current conversation.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_set_background_imagestring_url_null"><code>set_background_image</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> url = null)</h5>
<div class="paragraph">
<p>Set the background image of the conversation screen.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_generate_background_imagestring_prompt_idocument_docref_null"><code>generate_background_image</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> prompt, <a href="#_idocument">IDocument</a> docRef = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_add_slash_commandstring_cmd"><code>add_slash_command</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> cmd)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_insert_line_separatorstring_text"><code>insert_line_separator</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<div class="paragraph">
<p>Inserts a line separator in the conversation with given text.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_create_questionstring_id_string_suggestionbuttontext_string_text_liststring_options_int_timeoutseconds_0_bool_showtimeline_true_bool_forceshow_false_string_color_null_bool_forcehide_false"><code>create_question</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> id, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> suggestionButtonText, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; options, <a href="#_int">int</a> timeoutSeconds = 0, <a href="#_bool">bool</a> showTimeLine = True, <a href="#_bool">bool</a> forceShow = False, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> color = null, <a href="#_bool">bool</a> forceHide = False)</h5>
<div class="paragraph">
<p>Create a list item in the conversation view containing a question. The "optionSelected" signal will be posted with the result when the user clicks an option.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_start_countdownint_seconds_bool_showtimeline_true"><code>start_countdown</code>(<a href="#_int">int</a> seconds, <a href="#_bool">bool</a> showTimeLine = True)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_stop_countdown"><code>stop_countdown</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_toggle_context_menubool_on"><code>toggle_context_menu</code>(<a href="#_bool">bool</a> on)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_close_quiz_question"><code>close_quiz_question</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_listbutton_create_quiz_questionliststring_options_string_custominputlabel_null">List&lt;<a href="#_button">Button</a>&gt; <code>create_quiz_question</code>(List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; options, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> customInputLabel = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_close_question"><code>close_question</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_taskint_ask_chat_questionstring_asker_string_text_liststring_options_int_timeoutseconds_0">Task&lt;<a href="#_int">int</a>&gt; <code>ask_chat_question</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> asker, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; options, <a href="#_int">int</a> timeoutSeconds = 0)</h5>
<div class="paragraph">
<p>Create a dialog the conversation view containing a question. Returns index of option selected.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_wait_until_ready"><a href="#_task">Task</a> <code>wait_until_ready</code>()</h5>
<div class="paragraph">
<p>Wait until we have joined a network room and can safely use Shared.room etc</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_idocument_get_activity_firedocstring_name_scores"><a href="#_idocument">IDocument</a> <code>get_activity_firedoc</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> name = "scores")</h5>
<div class="paragraph">
<p>Get a reference to a firebase document for the current activity. If <code>name</code> is not given, the default name associated with this script is used.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_save_scoreint_score"><a href="#_task">Task</a> <code>save_score</code>(<a href="#_int">int</a> score)</h5>
<div class="paragraph">
<p>Save the best score for this user, for display in leaderboards.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_task_set_activity_userdatadictionarystringobject_data"><a href="#_task">Task</a> <code>set_activity_userdata</code>(Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; data)</h5>
<div class="paragraph">
<p>Save data for this user, for display in leaderboards.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskdictionarystringobject_get_activity_userdata">Task&lt;Dictionary&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>,<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt;&gt; <code>get_activity_userdata</code>()</h5>
<div class="paragraph">
<p>Get the set of properties associated with this activity for the current user.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskobject_get_score">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a>&gt; <code>get_score</code>()</h5>
<div class="paragraph">
<p>Returns the 'score' property of the userData associated with this activity.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_taskstring_web_getstring_url">Task&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>web_get</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> url)</h5>
<div class="paragraph">
<p>Perform a http GET and return it as text.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_cameramanager">CameraManager</h3>
<div class="sect4">
<h5 id="_cinemachinevirtualcamera_get_camera"><a href="#_cinemachinevirtualcamera">CinemachineVirtualCamera</a> <code>get_camera</code>()</h5>
<div class="paragraph">
<p>Get the currently active camera.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_set_cameracinemachinevirtualcamera_cam"><code>set_camera</code>(<a href="#_cinemachinevirtualcamera">CinemachineVirtualCamera</a> cam)</h5>
<div class="paragraph">
<p>Set the currently active camera. Since this is a Cinemachine camera it will be interpolated to.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_discovertabsspawner">DiscoverTabsSpawner</h3>
<div class="sect4">
<h5 id="_set_all_cardslistcardcollection_cardcol"><code>set_all_cards</code>(List&lt;<a href="#_cardcollection">CardCollection</a>&gt; cardCol)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_add_carddiscovercarddata_data_bool_showcreateui_string_sectionid"><code>add_card</code>(<a href="#_discovercarddata">DiscoverCardData</a> data, <a href="#_bool">bool</a> showCreateUi, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> sectionId)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_open_sectionstring_sectionid_int_cardstartindex_0"><code>open_section</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> sectionId, <a href="#_int">int</a> cardStartIndex = 0)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_open_activity_cardstring_activityid"><code>open_activity_card</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> activityId = "")</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_conversationsscreenpresenter">ConversationsScreenPresenter</h3>
<div class="sect4">
<h5 id="_set_face_trackingbool_on"><code>set_face_tracking</code>(<a href="#_bool">bool</a> on)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_musicgame">MusicGame</h3>
<div class="sect4">
<h5 id="_liststring_get_available_songs">List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; <code>get_available_songs</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_load_song_infostring_songname"><code>load_song_info</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> songName)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_start_music_gamesonginfo_songinfo_config_config"><code>start_music_game</code>(<a href="#_songinfo">SongInfo</a> songInfo, <a href="#_config">Config</a> config)</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_chathud">ChatHUD</h3>
<div class="sect4">
<h5 id="_set_chat_preview_textmessage_msg"><code>set_chat_preview_text</code>(<a href="#_message">Message</a> msg)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_trigger_overlay_textstring_type_string_text"><code>trigger_overlay_text</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> type, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_trigger_correct_answer_fxint_userscore"><code>trigger_correct_answer_fx</code>(<a href="#_int">int</a> userScore)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_player_scoreint_userscore"><code>set_player_score</code>(<a href="#_int">int</a> userScore)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_trigger_fail_answer_fx"><code>trigger_fail_answer_fx</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_trigger_activity_fail_fx"><code>trigger_activity_fail_fx</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_trigger_activity_won_fx"><code>trigger_activity_won_fx</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_increase_player_positionbool_didsucceed"><code>increase_player_position</code>(<a href="#_bool">bool</a> didSucceed)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_fail_player_progress"><code>fail_player_progress</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_init_score_barint_startscore"><code>init_score_bar</code>(<a href="#_int">int</a> startScore)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_init_player_progress_barint_numlevels_string_reachobjectivetext"><code>init_player_progress_bar</code>(<a href="#_int">int</a> numLevels, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> reachObjectiveText = "")</h5>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_liveinchatpanel">LiveInChatPanel</h3>
<div class="sect4">
<h5 id="_set_speech_bubblestring_playerid_string_text_int_remainseconds_action_whendone_null"><code>set_speech_bubble</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> playerId, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="#_int">int</a> remainSeconds, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.action">Action</a> whenDone = null)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_avatar_get_familiar_avatar"><a href="#_avatar">Avatar</a> <code>get_familiar_avatar</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_typingstring_playerid_bool_istyping_string_bgcolor_null_string_dotcolor_null_int_showseconds_10"><code>set_typing</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> playerId, <a href="#_bool">bool</a> isTyping, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> bgColor = null, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> dotColor = null, <a href="#_int">int</a> showSeconds = 10)</h5>
<div class="paragraph">
<p>Set the typing state of the player&#8217;s avatar.</p>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_set_player_decorationstring_playerid_bool_on_string_text_string_htmlcolor"><code>set_player_decoration</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> playerId, <a href="#_bool">bool</a> on, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> text, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> htmlColor)</h5>
<div class="paragraph">
<p>Set a badge with the specified text and color on the player&#8217;s avatar.</p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_conversationview">ConversationView</h3>
<div class="sect4">
<h5 id="_set_next_activity_buttonbool_on"><code>set_next_activity_button</code>(<a href="#_bool">bool</a> on)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_set_context_menubool_on"><code>set_context_menu</code>(<a href="#_bool">bool</a> on)</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_exit_chat"><code>exit_chat</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_add_arcade_button"><code>add_arcade_button</code>()</h5>
<hr>
</div>
<div class="sect4">
<h5 id="_add_wardrobe_button"><code>add_wardrobe_button</code>()</h5>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposed_objects">Exposed Objects</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gptstream">GptStream</h3>
<div class="paragraph">
<p>Represents a web stream for a gpt query.</p>
</div>
<div class="sect3">
<h4 id="_methods">Methods</h4>
<div class="sect4">
<h5 id="_taskgptstream_wait">Task&lt;<a href="#_gptstream">GptStream</a>&gt; <code>wait</code>()</h5>
<div class="paragraph">
<p>Wait for the stream to complete, and return it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_abort"><code>abort</code>()</h5>
<div class="paragraph">
<p>Abort the stream. Also find events generated by the stream and remove them from the event queue.</p>
</div>
</div>
<div class="sect4">
<h5 id="_taskbool_next">Task&lt;<a href="#_bool">bool</a>&gt; <code>next</code>()</h5>
<div class="paragraph">
<p>Advance the stream to the next msg. Returns false if the stream is finished.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_properties">Properties</h4>
<div class="sect4">
<h5 id="_string_all_text"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> all_text</h5>
<div class="paragraph">
<p>All text received up to this point.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_argument_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> argument_name</h5>
<div class="paragraph">
<p>Name of the last argument received.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_partial_string"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> partial_string</h5>
<div class="paragraph">
<p>The last partial string received.</p>
</div>
</div>
<div class="sect4">
<h5 id="_object_data"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> data</h5>
<div class="paragraph">
<p>The partial object received up to this point. Created by fixing up the json text, and then serializing it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_partial_json"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> partial_json</h5>
<div class="paragraph">
<p>The partial json text received up to this point. Created by fixing up the json text.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bool_got_argument_name"><a href="#_bool">bool</a> got_argument_name</h5>
<div class="paragraph">
<p>True if an argument name was received from the GPT stream in the previous <code>next()</code> call.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bool_got_argument_data"><a href="#_bool">bool</a> got_argument_data</h5>
<div class="paragraph">
<p>True if the complete data of an argument was received from the GPT stream in the previous <code>next()</code> call.</p>
</div>
</div>
<div class="sect4">
<h5 id="_bool_got_partial_string"><a href="#_bool">bool</a> got_partial_string</h5>
<div class="paragraph">
<p>True if a partial string was received from the GPT stream in the previous <code>next()</code> call.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_signalresult">SignalResult</h3>
<div class="paragraph">
<p>The result from a signal over the network</p>
</div>
<div class="sect3">
<h4 id="_properties_2">Properties</h4>
<div class="sect4">
<h5 id="_string_userid"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> userId</h5>
<div class="paragraph">
<p>The user who returned the result</p>
</div>
</div>
<div class="sect4">
<h5 id="_object_result"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> result</h5>
<div class="paragraph">
<p>The parameters of the result</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scriptevent">ScriptEvent</h3>
<div class="paragraph">
<p>An event for holding sent signals, and stream events.</p>
</div>
<div class="sect3">
<h4 id="_properties_3">Properties</h4>
<div class="sect4">
<h5 id="_bool_is_stream"><a href="#_bool">bool</a> is_stream</h5>

</div>
<div class="sect4">
<h5 id="_bool_is_signal"><a href="#_bool">bool</a> is_signal</h5>

</div>
<div class="sect4">
<h5 id="_bool_is_text_incoming"><a href="#_bool">bool</a> is_text_incoming</h5>

</div>
<div class="sect4">
<h5 id="_bool_is_message_transcribed"><a href="#_bool">bool</a> is_message_transcribed</h5>

</div>
<div class="sect4">
<h5 id="_bool_is_network"><a href="#_bool">bool</a> is_network</h5>

</div>
<div class="sect4">
<h5 id="_value_arg"><a href="#_value">Value</a> arg</h5>
<div class="paragraph">
<p>Shortcut to first signal_argument</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_error"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> error</h5>

</div>
<div class="sect4">
<h5 id="_object_stream"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> stream</h5>
<div class="paragraph">
<p>The gpt stream for this event, if any.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_signal_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> signal_name</h5>

</div>
<div class="sect4">
<h5 id="_listvalue_signal_arguments">List&lt;<a href="#_value">Value</a>&gt; signal_arguments</h5>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_idocument">IDocument</h3>
<div class="paragraph">
<p>Represents a Firebase document reference</p>
</div>
<div class="sect3">
<h4 id="_methods_2">Methods</h4>
<div class="sect4">
<h5 id="_taskidocsnapshot_getsnapshot">Task&lt;<a href="#_idocsnapshot">IDocSnapshot</a>&gt; <code>GetSnapshot</code>()</h5>

</div>
<div class="sect4">
<h5 id="_icollection_getcollectionstring_collname"><a href="#_icollection">ICollection</a> <code>GetCollection</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> collName)</h5>

</div>
<div class="sect4">
<h5 id="_task_setobject_data"><a href="#_task">Task</a> <code>Set</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> data)</h5>

</div>
<div class="sect4">
<h5 id="_task_updatestring_field_object_value"><a href="#_task">Task</a> <code>Update</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> field, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> value)</h5>

</div>
<div class="sect4">
<h5 id="_task_overwriteobject_data"><a href="#_task">Task</a> <code>Overwrite</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> data)</h5>

</div>
<div class="sect4">
<h5 id="_task_arrayaddstring_field_object_value"><a href="#_task">Task</a> <code>ArrayAdd</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> field, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> value)</h5>

</div>
<div class="sect4">
<h5 id="_task_fieldincrementstring_field_int_value"><a href="#_task">Task</a> <code>FieldIncrement</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> field, <a href="#_int">int</a> value)</h5>

</div>
<div class="sect4">
<h5 id="_task_arrayremovestring_field_object_value"><a href="#_task">Task</a> <code>ArrayRemove</code>(<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> field, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.object">object</a> value)</h5>

</div>
<div class="sect4">
<h5 id="_ilistener_listenactionidocsnapshot_action"><a href="#_ilistener">IListener</a> <code>Listen</code>(Action&lt;<a href="#_idocsnapshot">IDocSnapshot</a>&gt; action)</h5>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_avatar">Avatar</h3>
<div class="paragraph">
<p>Represents an animated avatar on the screen</p>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_receiver">Receiver</h3>
<div class="paragraph">
<p>Holds group or private messages reference.</p>
</div>
<div class="sect3">
<h4 id="_properties_4">Properties</h4>
<div class="sect4">
<h5 id="_string_name"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Name</h5>

</div>
<div class="sect4">
<h5 id="_bool_isgroup"><a href="#_bool">bool</a> IsGroup</h5>

</div>
<div class="sect4">
<h5 id="_uri_thumbnailurl"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.uri">Uri</a> ThumbnailUrl</h5>

</div>
<div class="sect4">
<h5 id="_string_id"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Id</h5>

</div>
<div class="sect4">
<h5 id="_datetime_lastmessage"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.datetime">DateTime</a> lastMessage</h5>

</div>
<div class="sect4">
<h5 id="_friend_friend"><a href="#_friend">Friend</a> Friend</h5>

</div>
<div class="sect4">
<h5 id="_usergroup_group"><a href="#_usergroup">UserGroup</a> Group</h5>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_activitydata">ActivityData</h3>
<div class="paragraph">
<p>Represents an activity</p>
</div>
<div class="sect3">
<h4 id="_properties_5">Properties</h4>
<div class="sect4">
<h5 id="_string_id_2"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Id</h5>

</div>
<div class="sect4">
<h5 id="_string_title"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Title</h5>

</div>
<div class="sect4">
<h5 id="_string_subtitle"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> SubTitle</h5>

</div>
<div class="sect4">
<h5 id="_string_longdescription"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> LongDescription</h5>

</div>
<div class="sect4">
<h5 id="_string_cardbackgroundurl"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> CardBackgroundUrl</h5>

</div>
<div class="sect4">
<h5 id="_string_hostid"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> HostId</h5>

</div>
<div class="sect4">
<h5 id="_string_hostname"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> HostName</h5>

</div>
<div class="sect4">
<h5 id="_string_script"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Script</h5>

</div>
<div class="sect4">
<h5 id="_string_creatorid"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> CreatorId</h5>

</div>
<div class="sect4">
<h5 id="_liststring_invitedusers">List&lt;<a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a>&gt; InvitedUsers</h5>

</div>
<div class="sect4">
<h5 id="_int_stars"><a href="#_int">int</a> Stars</h5>
<div class="paragraph">
<p>Number of stars the activity has received.</p>
</div>
</div>
<div class="sect4">
<h5 id="_datetime_createdat"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.datetime">DateTime</a> CreatedAt</h5>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Represents a message that can either be posted to the chat and/or spoken by avatar.</p>
</div>
<div class="sect3">
<h4 id="_properties_6">Properties</h4>
<div class="sect4">
<h5 id="_string_fromid"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> FromId</h5>
<div class="paragraph">
<p>The id of the user from which the message originates. User 'familiar' for the host/bot.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_emote"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Emote</h5>
<div class="paragraph">
<p>The emote that should be played on an avatar playing or speaking the message.</p>
</div>
</div>
<div class="sect4">
<h5 id="_string_text"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Text</h5>
<div class="paragraph">
<p>The actual text of the message.</p>
</div>
</div>
<div class="sect4">
<h5 id="_uri_thumbnailurl_2"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.uri">Uri</a> ThumbnailUrl</h5>
<div class="paragraph">
<p>Thumbnail to show beside the message.</p>
</div>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scapinroomproperties">ScapinRoomProperties</h3>
<div class="sect3">
<h4 id="_properties_7">Properties</h4>
<div class="sect4">
<h5 id="_uri_thumbnailurl_3"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.uri">Uri</a> ThumbnailUrl</h5>

</div>
<div class="sect4">
<h5 id="_string_displayname"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> DisplayName</h5>

</div>
<div class="sect4">
<h5 id="_string_roomkey"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> RoomKey</h5>
<hr>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_discovercarddata">DiscoverCardData</h3>
<div class="paragraph">
<p>Data describing a <code>DiscoverCard</code> as shown when starting the app.</p>
</div>
<div class="sect3">
<h4 id="_properties_8">Properties</h4>
<div class="sect4">
<h5 id="_string_title_2"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Title</h5>

</div>
<div class="sect4">
<h5 id="_string_subtitle_2"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> SubTitle</h5>

</div>
<div class="sect4">
<h5 id="_string_description"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> Description</h5>

</div>
<div class="sect4">
<h5 id="_uri_backgroundurl"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.uri">Uri</a> BackgroundUrl</h5>

</div>
<div class="sect4">
<h5 id="_unityaction_buttoncallback"><a href="#_unityaction">UnityAction</a> ButtonCallback</h5>

</div>
<div class="sect4">
<h5 id="_string_buttoncolorhex"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> ButtonColorHex</h5>

</div>
<div class="sect4">
<h5 id="_string_buttontext"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.string">string</a> ButtonText</h5>
<hr>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-10-18 13:30:16 +0200
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script>
</body>
</html>